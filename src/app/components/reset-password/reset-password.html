<div class="login-container">
  <div class="login-card">
    <h2>Reset Password</h2>

    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="new_password">New Password</label>
        <input
          id="new_password"
          type="password"
          formControlName="new_password"
          class="form-control"
          [class.invalid]="
            resetPasswordForm.get('new_password')?.invalid &&
            (resetPasswordForm.get('new_password')?.dirty ||
              resetPasswordForm.get('new_password')?.touched)
          "
          placeholder="Enter new password"
        />

        <div class="error-message" *ngIf="
          resetPasswordForm.get('new_password')?.errors &&
          (resetPasswordForm.get('new_password')?.dirty ||
            resetPasswordForm.get('new_password')?.touched)
        ">
          <div *ngIf="resetPasswordForm.get('new_password')?.hasError('required')">
            Password is required.
          </div>
          <div *ngIf="resetPasswordForm.get('new_password')?.hasError('minlength')">
            Minimum {{ resetPasswordForm.get('new_password')?.errors?.['minlength']?.requiredLength }} characters required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirm_new_password">Confirm New Password</label>
        <input
          id="confirm_new_password"
          type="password"
          formControlName="confirm_new_password"
          class="form-control"
          [class.invalid]="
            resetPasswordForm.hasError('mismatch') ||
            (resetPasswordForm.get('confirm_new_password')?.invalid &&
              (resetPasswordForm.get('confirm_new_password')?.dirty ||
                resetPasswordForm.get('confirm_new_password')?.touched))
          "
          placeholder="Confirm new password"
        />

        <div class="error-message" *ngIf="
          resetPasswordForm.hasError('mismatch') ||
          resetPasswordForm.get('confirm_new_password')?.errors
        ">
          <div *ngIf="resetPasswordForm.hasError('mismatch')">
            Passwords do not match.
          </div>
         
        </div>
      </div>

      <button class="btn-primary" type="submit" [disabled]="loading">
        {{ loading ? 'Resetting...' : 'Reset Password' }}
      </button>

      <div class="success-message" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </form>
    
    <div class="links">
        <a routerLink="/login">already has an account? back to  login</a>

    </div>
  </div>
</div>
